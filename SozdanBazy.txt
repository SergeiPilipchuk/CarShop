USE AVTOSALON

CREATE TABLE Models
(
	ModelID		INT NOT NULL IDENTITY(1,1),
	ModelName VARCHAR(45),
	PRIMARY KEY(ModelID)
)

CREATE TABLE Cars
(
	CarID		INT NOT NULL IDENTITY(1,1),
	ModelID INT NOT NULL,
	Marka	VARCHAR(45),
	Strana VARCHAR(45),
	PRIMARY KEY(CarID),
	FOREIGN KEY(ModelID) REFERENCES Models(ModelID) ON UPDATE CASCADE 
													ON DELETE NO ACTION
)

CREATE TABLE Xarak_ki
(
	Loshad_sil		INT,
	CarID		INT NOT NULL,
	Dvigatel     FLOAT,
	Korobka VARCHAR(45),
	PRIMARY KEY(CarID),
	FOREIGN KEY(CarID) REFERENCES Cars(CarID) ON UPDATE CASCADE 
													ON DELETE NO ACTION
)

CREATE TABLE Details
(
	Cena		INT,
	CarID		INT NOT NULL,
	Cvet     VARCHAR(45),
	Kuzov VARCHAR(45),
	PRIMARY KEY(CarID),
	FOREIGN KEY(CarID) REFERENCES Cars(CarID) ON UPDATE CASCADE 
													ON DELETE NO ACTION
)

CREATE TABLE Klients
(
	KlientID		INT NOT NULL IDENTITY(1,1),
	FIO		VARCHAR(80),
	Tel INT,
	PRIMARY KEY(KlientID),
)	

CREATE TABLE Orders
(
	OrderID		INT NOT NULL IDENTITY(1,1),
	KlientID INT NOT NULL,
	OrderDate		DATE,
	PRIMARY KEY(OrderID),
	FOREIGN KEY(KlientID) REFERENCES Klients(KlientID) ON UPDATE CASCADE 
													ON DELETE NO ACTION
	
)

CREATE TABLE OrdCar
(
	CarID		INT,
	OrderID		INT,
	PRIMARY KEY (CarID, OrderID),
	FOREIGN KEY (CarID) REFERENCES Cars(CarID) ON UPDATE CASCADE
													 ON DELETE CASCADE,
	FOREIGN KEY (OrderID) REFERENCES Orders(OrderID) ON UPDATE CASCADE 
												ON DELETE NO ACTION
)
